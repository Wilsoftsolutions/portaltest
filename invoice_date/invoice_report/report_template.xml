<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <template id="invoice_report_id">
            <t t-call="web.html_container" style="margin-top:150px">
                <t t-call="web.internal_layout">
                    <!-- <t t-call="report.external_layout"> -->
                    <t t-call="invoice_date.id_of_the_template"/>
                    <style>
                        .data_table_body thead td {text-align: center;}
                        .row_body td {padding-left: 10px;}
                    </style>

                    <div class="page">
                        <table width="100%" class="table-bordered">
                            <thead class="text-center">
                                <tr>
                                    <th width="5%">Sr#</th>
                                    <th width="15%">Product</th>
                                    <th width="10%">Color</th>
                                    <th width="5%">Uom</th>
                                    <th width="35%">
                                        <table width="100%" style="padding-left: 0px; padding-right"
                                               class="table-bordered-none">
                                            <thead>
                                                <tr class="text-center">
                                                    Sizes Ranges
                                                </tr>
                                                <tr>
                                                    <th width="12.5%">39</th>
                                                    <th width="12.5%">40</th>
                                                    <th width="12.5%">41</th>
                                                    <th width="12.5%">42</th>
                                                    <th width="12.5%">43</th>
                                                    <th width="12.5%">44</th>
                                                    <th width="12.5%">45</th>
                                                    <th width="12.5%">46</th>
                                                </tr>
                                            </thead>
                                        </table>
                                    </th>
                                    <th width="10%">Total Qty</th>
                                    <th width="10%">Rate</th>
                                    <th width="10%">Total Price</th>
                                </tr>
                            </thead>
                            <t t-set="count" t-value="0"/>
                            <t t-foreach="variant_values" t-as="variant">
                                <tbody class="data_table_body">
                                    <t t-set="count" t-value="count+1"/>
                                    <tr class="row_body">
                                        <td>
                                            <span t-esc="count"/>
                                        </td>
                                        <td>
                                            <span t-esc="variant['product_name']"/>
                                        </td>
                                        <td>
                                            <span t-esc="variant['color_name']"/>
                                        </td>
                                        <td>
                                            <span t-esc="variant['uom']"/>
                                        </td>
                                        <td style="padding-left: 0px!important;">
                                            <t t-if="variant['color_name'] != '-'">
                                                <table width="100%" class="data_table_inside">
                                                    <t t-set="total_qty" t-value="0"/>
                                                    <t t-foreach="variant['sizes']" t-as="size">
                                                        <tbody>
                                                            <tr>

                                                                <td width="12.5%">
                                                                    <span t-esc="size['39']"/>
                                                                    <span t-set="total_qty"
                                                                          t-value="(total_qty + size['39'])"/>
                                                                </td>
                                                                <td width="12.5%">
                                                                    <span t-esc="size['40']"/>
                                                                    <span t-set="total_qty"
                                                                          t-value="(total_qty + size['40'])"/>
                                                                </td>
                                                                <td width="12.5%">
                                                                    <span t-esc="size['41']"/>
                                                                    <span t-set="total_qty"
                                                                          t-value="(total_qty + size['41'])"/>
                                                                </td>
                                                                <td width="12.5%">
                                                                    <span t-esc="size['42']"/>
                                                                    <span t-set="total_qty"
                                                                          t-value="(total_qty + size['42'])"/>
                                                                </td>
                                                                <td width="12.5%">
                                                                    <span t-esc="size['43']"/>
                                                                    <span t-set="total_qty"
                                                                          t-value="(total_qty + size['43'])"/>
                                                                </td>
                                                                <td width="12.5%">
                                                                    <span t-esc="size['44']"/>
                                                                    <span t-set="total_qty"
                                                                          t-value="(total_qty + size['44'])"/>
                                                                </td>
                                                                <td width="12.5%">
                                                                    <span t-esc="size['45']"/>
                                                                    <span t-set="total_qty"
                                                                          t-value="(total_qty + size['45'])"/>
                                                                </td>
                                                                <td width="12.5%">
                                                                    <span t-esc="size['46']"/>
                                                                    <span t-set="total_qty"
                                                                          t-value="(total_qty + size['46'])"/>
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </t>
                                                </table>
                                            </t>
                                            <t t-else="">
                                                <span style="padding-left: 10px;">No size set</span>
                                            </t>
                                        </td>
                                        <td>
                                            <t t-if="variant['color_name'] != '-'">
                                                <span t-esc="total_qty"/>
                                            </t>
                                            <t t-else="">
                                                <span t-set="total_qty" t-value="variant['line_total_qty']"/>
                                                <span t-esc="total_qty"/>
                                            </t>
                                        </td>
                                        <td>
                                            <span t-esc="variant['retail_price']"/>
                                        </td>
                                        <td>
                                            <t t-set="total_amount" t-value="variant['retail_price'] * total_qty"/>
                                            <span t-esc="total_amount" t-options='{"widget": "float", "precision": 2}'/>
                                        </td>
                                    </tr>
                                </tbody>
                            </t>
                        </table>
                    </div>
                </t>
            </t>
        </template>
    </data>
</odoo>